<div class="font-inter">
  <div class="h-[10%] w-full border-b border-black/[0.10]">
    <div class="flex relative">
      <div
        [ngClass]="{
          'bg-[#e32525]': data.tache.STATUS === 0,
          'bg-[#43597D]': data.tache.STATUS === 10,
          'bg-[#0b8e01]': data.tache.STATUS === 1
        }"
        class="w-[70px] h-[6px] rounded-[4px]"
      ></div>
      <button class="absolute right-0 border-0" (click)="onNoClick()">
        <i data-feather="x-circle"></i>
      </button>
    </div>
    <div class="mt-2 font-bold text-[16px]">{{ data.tache.ID_TACHED }}</div>
    <div class="flex gap-2">
      <div *ngFor="let ex of data.executeur">
        <div *ngIf="ex.shown" class="flex pt-2 pb-2 gap-1">
          <div class="w-[20px] h-[20px] bg-orange-500 rounded-full"></div>
          <div class="font-thin text-[13px] text-[#000000]/[0.62] italic">
            {{ ex.ID_UTILISATEUR }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <form>
    <div class="flex flex-col gap-6 h-[90%] overflow-auto">
      <div class="mt-4 h-[100px] bg-red">
        <div class="flex gap-2">
          <div><i class="w-[20px] h-[20px]" data-feather="file-text"></i></div>
          <div class="font-medium text-[15px]">Description</div>
        </div>
        <div class="h-full mt-2">
          <textarea
            class="w-full h-full font-extralight text-[13px] border p-4 drop-shadow-[0_4px_4px_rgba(0,0,0,0.25)]"
            placeholder="Description"
            [(ngModel)]="data.tache.DESCRIPTION"
            name="description"
            [disabled]="disableUpdate"
          ></textarea>
        </div>
      </div>
      <div class="mt-[2%]">
        <div class="flex gap-2 pt-4 pb-2">
          <div><i class="w-[20px] h-[20px]" data-feather="clock"></i></div>
          <div class="font-medium text-[15px]">Deadline</div>
        </div>
        <div class="mt-2 flex gap-2">
          <div class="flex flex-col gap-1">
            <label class="text-[13px]">Debut</label>
            <div class="flex border">
              <input
                class="border-t p-1"
                matInput
                [matDatepicker]="picker"
                name="debut"
                [(ngModel)]="data.tache.DATE_DEBUT"
                [disabled]="disableUpdate"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
            </div>
          </div>
          <div class="flex flex-col gap-1">
            <label class="text-[13px]">Fin</label>
            <div class="flex border">
              <input
                class="border-t p-1"
                matInput
                [matDatepicker]="picker2"
                name="fin"
                [(ngModel)]="data.tache.DATE_FIN"
                [disabled]="disableUpdate"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker2"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker2></mat-datepicker>
            </div>
          </div>
        </div>
      </div>
      <div>
        <div class="flex gap-2 pt-4">
          <div><i class="w-[20px] h-[20px]" data-feather="bell"></i></div>
          <div class="font-light text-[15px]">Reminder</div>
        </div>
        <div class="pl-2 flex gap-3 mt-2">
          <mat-select
            [disabled]="disableUpdate"
            class="border w-[50%] h-[50px] p-2"
            name="alarme"
            [(ngModel)]="data.tache.ID_ALARME"
            [(value)]="data.tache.ID_ALARME"
          >
            <mat-option *ngFor="let al of reminderList" [value]="al.ID_ALARME">
              {{ al.LIBELLE }}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div *ngIf="data.tache.FICHIER == 1">
        <div class="flex gap-2 pt-4">
          <div><i class="w-[20px] h-[20px]" data-feather="file"></i></div>
          <div class="font-light text-[15px]">Document attaché</div>
        </div>
        <div class="mt-[1%] flex flex-col">
          <app-file [tache]="data.tache"></app-file>
          <table mat-table [dataSource]="fichier" class="mat-elevation-z8">
            <ng-container matColumnDef="Titre">
              <th mat-header-cell *matHeaderCellDef="">Titre</th>
              <td mat-cell *matCellDef="let element">{{ element.TITRE }}</td>
            </ng-container>
            <ng-container matColumnDef="Link">
              <th mat-header-cell *matHeaderCellDef="">Link</th>
              <td mat-cell *matCellDef="let element">{{ element.LINK }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
          </table>
        </div>
      </div>
      <div class="flex mt-[5%] gap-[5%] w-full text-white justify-center">
        <button
          class="bg-red-700 w-[25%] h-[50px] drop-shadow-[0_4px_4px_rgba(0,0,0,0.25)]"
        >
          Réinitialiser
        </button>
        <button
          class="bg-[#0b8e01] w-[25%] h-[50px] drop-shadow-[0_4px_4px_rgba(0,0,0,0.25)]"
          type="submit"
          (click)="updateTask()"
        >
          Modifier
        </button>
      </div>
    </div>
  </form>
</div>
